(self.webpackChunknew_bedford_framework=self.webpackChunknew_bedford_framework||[]).push([[1546],{91546:function(t,e,r){"use strict";r.d(e,{A:function(){return w}});r(94226);var n=r(23029),i=r(92901),o=r(56822),a=r(53954),u=r(85501),s=r(64467),c=r(91028),f=r(76329),p=r(45299),h=r(65814),v=r(11561),g=r(80225),l=r(22131),m=r(89500);var d=r(47048),y=r.n(d);function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){(0,s.A)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function P(t,e,r){return e=(0,a.A)(e),(0,o.A)(t,T()?Reflect.construct(e,r||[],(0,a.A)(t).constructor):e.apply(t,r))}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T=function(){return!!t})()}var w=function(t){function e(t,r){var i;return(0,n.A)(this,e),(i=P(this,e,[t,A(A({},e.defaultProps),r)])).createResources(),i}return(0,u.A)(e,t),(0,i.A)(e,[{key:"createResources",value:function(){var t=this.props,e=t.image,r=t.uniforms;this.texture=new f.A({image:e}),this.drawInfo=(0,p.A)({program:this.createProgram(),uniforms:A(A(A({},r),this.getUniformsFromProps()),{},{uvMatrix:y()(),uImage:(0,h.A)(this.renderer,this.texture),uResolution:[this.width,this.height]}),geometry:this.getGeometry({key:"big-triangle",factory:v.A})}),this.uniforms=this.drawInfo.uniforms,this.updateUvMatrix()}},{key:"getUniformsFromProps",value:function(){return{}}},{key:"createProgram",value:function(){var t=this.props,e=t.programKey,r=t.vert,n=t.frag;return this.getProgram({key:e,factory:function(){return new g.A({vert:r,frag:n})}})}},{key:"onUpdateProps",value:function(t){this.props.programKey!==t.programKey&&(this.releaseResource(t.programKey),this.drawInfo.program=this.createProgram()),(this.props.imageNeedsUpdate||this.props.image!==t.image)&&(this.texture.image=this.props.image,this.texture.needsUpdate=!0,this.props.imageNeedsUpdate=!1),Object.assign(this.uniforms,this.getUniformsFromProps()),this.refresh()}},{key:"render",value:function(){(0,l.A)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){this.uniforms.uResolution[0]=this.width,this.uniforms.uResolution[1]=this.height,this.updateUvMatrix()}},{key:"updateUvMatrix",value:function(){!function(t){var e,r,n=t.matrix,i=void 0===n?[]:n,o=t.containerWidth,a=t.containerHeight,u=t.contentWidth,s=t.contentHeight,c=t.centerX,f=void 0===c?.5:c,p=t.centerY;u/s>o/a?(e=o*s/(a*u),r=1):(e=1,r=a*u/(o*s));var h=(e-1)/2*-1,v=(r-1)/2*-1,g=h+(f-.5)*h*2,l=v+(.5-(void 0===p?.5:p))*v*2;(0,m.i)(i),(0,m.t)(i,i,[g,l]),(0,m.s)(i,i,[e,r])}({matrix:this.drawInfo.material.uniforms.uvMatrix,containerWidth:this.width,containerHeight:this.height,contentWidth:this.props.image.naturalWidth,contentHeight:this.props.image.naturalHeight,centerX:this.props.focalPoint.x,centerY:this.props.focalPoint.y})}}])}(c.A);(0,s.A)(w,"defaultProps",{programKey:null,vert:"\nattribute vec3 aPosition;\nuniform mat3 uvMatrix;\nvarying vec2 vUv;\n\nvoid main(){\n  gl_Position = vec4(aPosition, 1.);\n\n  vec2 uv = gl_Position.xy * .5 + .5;\n\n  vUv = (uvMatrix * vec3(uv, 1.)).xy;\n}\n",frag:"\nuniform sampler2D uImage;\nvarying vec2 vUv;\n\nvoid main(){\n  vec4 tx = texture2D(uImage, vUv);\n  tx.xyz *= tx.a;\n\n  gl_FragColor = tx;\n}\n",image:null,focalPoint:{x:.5,y:.5},uniforms:{},imageNeedsUpdate:!1})},47048:function(t){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}},14302:function(t,e,r){"use strict";r.d(e,{F:function(){return o},hq:function(){return n},py:function(){return i}});var n="aPosition",i="aNormal",o="aUv"},11561:function(t,e,r){"use strict";r.d(e,{A:function(){return u}});var n=r(14302),i=r(85579),o=r(84430),a=r(57064);function u(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).position,e=void 0===t?n.hq:t,r=new i.A,u=new Float32Array([-1,-1,-1,3,3,-1]);return(0,o.A)(r,e,new a.A({array:u,itemSize:2})),r}},89500:function(t,e,r){"use strict";r.d(e,{i:function(){return n},s:function(){return o},t:function(){return i}});var n=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};var i=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],p=e[8],h=r[0],v=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*n+v*a+c,t[7]=h*i+v*u+f,t[8]=h*o+v*s+p,t};var o=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},82053:function(t,e,r){"use strict";r.d(e,{A:function(){return o}});var n=r(53222),i="activeTexture";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.get(i)!==e&&(t.gl.activeTexture(n.ey+e),t.set(i,e))}},82614:function(t,e,r){"use strict";r.d(e,{A:function(){return i}});var n=r(53222);function i(t,e,r){var i="texture-".concat(r);t.get(i)!==e&&(t.gl.bindTexture(n.TS,e),t.set(i,e))}},76329:function(t,e,r){"use strict";r.d(e,{A:function(){return o}});var n=r(42512),i=r(53222),o=(0,n._)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.image,o=void 0===r?null:r,a=e.minFilter,u=void 0===a?i._Q:a,s=e.magFilter,c=void 0===s?i._Q:s,f=e.wrapS,p=void 0===f?i.aE:f,h=e.wrapT,v=void 0===h?i.aE:h,g=e.format,l=void 0===g?i.bU:g,m=e.type,d=void 0===m?i.l4:m,y=e.flipY,x=void 0===y||y,A=e.premultiplyAlpha,P=void 0!==A&&A;(0,n.a)(this,t),this.image=o,this.minFilter=u,this.magFilter=c,this.wrapS=p,this.wrapT=v,this.format=l,this.type=d,this.flipY=x,this.premultiplyAlpha=P,this.generateMipmap=this.minFilter!==i._Q&&this.minFilter!==i.te,this.needsUpdate=!1}))},65814:function(t,e,r){"use strict";r.d(e,{A:function(){return s}});var n=r(82053),i=r(82614),o=r(53222);function a(t,e){var r=t.gl;e.image&&r.texImage2D(o.TS,0,e.format,e.format,e.type,e.image),e.generateMipmap&&r.generateMipmap(o.TS)}var u=r(83839);function s(t,e){var r=t.textures,o=r.textureBindings,s=o.get(e);return s||(s=function(){return function(t,e,r){var o=t.gl,s=t.properties.get(e);return(0,n.A)(t.state,r),s.glTexture?((0,i.A)(t.state,s.glTexture,r),!0===e.needsUpdate&&(a(t.state,e,s.glTexture),e.needsUpdate=!1)):(s.glTexture=o.createTexture(),(0,i.A)(t.state,s.glTexture,r),(0,u.A)(o,e),a(t.state,e,s.glTexture)),r}(t,e,r.nextTextureUnit++)},o.set(e,s)),s}},83839:function(t,e,r){"use strict";function n(t,e){var r=e.wrapS,n=e.wrapT,i=e.minFilter,o=e.magFilter,a=e.flipY,u=e.premultiplyAlpha;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u)}r.d(e,{A:function(){return n}})}}]);